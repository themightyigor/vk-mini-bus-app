{"version":3,"sources":["logo.svg","img/persik.png","components/SearchForm.js","components/SelectCity.js","reducers/stateReducer.js","contexts/StateContext.js","components/StopTable.js","components/Map.js","panels/ScheduleDetail.js","panels/Departures.js","panels/DeparturesFilter.js","components/Footer.js","App.js","routes.js","index.js","create-router.js"],"names":["module","exports","__webpack_require__","p","SearchForm","_ref","from","to","router","onSubmit","swapValues","react_default","a","createElement","dist","name","top","onClick","navigate","state","city","style","display","justifyContent","repeat_default","fill","size","level","cities","code","SelectCity","props","route","activeCity","params","map","key","handleCitySelect","asideContent","done_default","renderCell","stateReducer","draft","action","type","schedules","data","regExp","splitTitle","title","split","trim","origin","search","segments","item","isTransit","thread","Object","objectSpread","formatData","payload","departures","sortedDepartures","loading","error","newMode","mode","tempDepartures","date","Date","formattedDate","toDateString","filter","schedule","parse","concat","departure","tooltip","StateContext","React","createContext","StateContextProvider","_useImmerReducer","useImmerReducer","_useImmerReducer2","slicedToArray","dispatch","Provider","value","children","StopTable","stops","Fragment","className","stop","index","multiline","station","slice","arrival","require","compose","withProps","lifecycle","withScriptjs","withGoogleMap","GoogleMap","DirectionsRenderer","MapWithADirectionsRenderer","googleMapURL","loadingElement","height","containerElement","mapElement","componentDidMount","_this","this","DirectionsService","window","google","maps","waypoints","length","location","stopover","destination","travelMode","TravelMode","DRIVING","result","status","DirectionsStatus","OK","setState","directions","console","defaultZoom","defaultCenter","LatLng","initialDetailsState","details","ScheduleDetail","_useState","useState","_useState2","setDetails","useEffect","axios","get","process","uid","then","res","catch","err","log","left","PanelHeaderBack_default","alignItems","flexDirection","marginTop","before","info_default","number","recent_default","days","src_components_StopTable","Map","Departures","_useContext","useContext","_useContext$state","description","expandable","width","maxWidth","margin","src","persik","alt","text","isShown","onClose","offsetX","DeparturesFilter","memo","context","setContext","handleFilterSelect","e","currentTarget","dataset","requestAnimationFrame","aside","dropdown_default","opened","view_default","data-mode","hide_default","Footer","textAlign","component","target","href","link_default","App","_useRouteNode","useRouteNode","setFrom","_useState3","_useState4","setTo","fetchData","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","sent","t0","_x","_x2","apply","arguments","activeView","activePanel","popout","id","logo","components_SearchForm","preventDefault","components_Footer","panels_DeparturesFilter","panels_Departures","panels_ScheduleDetail","components_SelectCity","routes","path","connect","send","createRouter","defaultRoute","usePlugin","loggerPlugin","browserPlugin","useHash","start","ReactDOM","render","contexts_StateContext","index_es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e5cc0974.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.277c5867.svg\";","module.exports = __webpack_public_path__ + \"static/media/persik.7a7c06ad.png\";","import React from 'react';\nimport {\n  SelectMimicry,\n  Button,\n  FormLayoutGroup,\n  FormLayout\n} from '@vkontakte/vkui';\nimport Icon24Repeat from '@vkontakte/icons/dist/24/repeat';\nconst SearchForm = ({ from, to, router, onSubmit, swapValues }) => (\n  <FormLayout onSubmit={onSubmit}>\n    <FormLayoutGroup>\n      <SelectMimicry\n        name='from'\n        top='Куда'\n        onClick={() =>\n          router.navigate('select', {\n            state: 'from'\n          })\n        }\n      >\n        {from.city}\n      </SelectMimicry>\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'center'\n        }}\n      >\n        <Icon24Repeat fill='var(--accent)' onClick={swapValues} />\n      </div>\n      <SelectMimicry\n        name='to'\n        top='Откуда'\n        onClick={() =>\n          router.navigate('select', {\n            state: 'to'\n          })\n        }\n      >\n        {to.city}\n      </SelectMimicry>\n    </FormLayoutGroup>\n    <Button size='xl' level='primary'>\n      Найти\n    </Button>\n  </FormLayout>\n);\n\nexport default SearchForm;\n","import React from 'react';\nimport { Group, List, PanelHeader, Cell } from '@vkontakte/vkui';\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\n\nconst cities = [\n  {\n    name: 'Кингисепп',\n    code: 'c10870'\n  },\n  {\n    name: 'Санкт-Петербург',\n    code: 'c2'\n  }\n];\n\nconst SelectCity = props => {\n  const route = props.route;\n  const activeCity = route.params.state === 'from' ? props.from : props.to;\n\n  const renderCell = (city, code) => {\n    return (\n      <Cell\n        key={code}\n        onClick={() => {\n          props.handleCitySelect(route.params.state, city, code);\n        }}\n        asideContent={\n          activeCity === city ? <Icon24Done fill='var(--accent)' /> : null\n        }\n      >\n        {city}\n      </Cell>\n    );\n  };\n\n  return (\n    <div>\n      <PanelHeader>\n        {route.name === 'from'\n          ? 'Выберите место отправления'\n          : 'Выберите место назначения'}\n      </PanelHeader>\n      <Group>\n        <List>{cities.map(city => renderCell(city.name, city.code))}</List>\n      </Group>\n    </div>\n  );\n};\n\nexport default SelectCity;\n","export const stateReducer = (draft, action) => {\n  switch (action.type) {\n    case 'FETCH_DATA_SUCCESS': {\n      let formatData = data => {\n        const regExp = /[—,-]/;\n        let splitTitle = title => title.split(regExp)[0].trim();\n        let origin = splitTitle(data.search.from.title);\n        let tempData = data.segments.map(item => {\n          let from = splitTitle(item.thread.title);\n          let isTransit = from !== origin;\n          let segment = { ...item, isTransit };\n          return segment;\n        });\n        return tempData;\n      };\n\n      let schedules = formatData(action.payload);\n      draft.departures = schedules;\n      draft.sortedDepartures = schedules;\n      draft.loading = false;\n      draft.error = false;\n      return;\n    }\n    case 'FETCH_DATA_REQUEST': {\n      draft.loading = true;\n      return;\n    }\n    case 'FETCH_DATA_ERROR': {\n      draft.error = true;\n      draft.loading = false;\n      return;\n    }\n    case 'SET_FILTER': {\n      const newMode = action.payload;\n\n      if (newMode === draft.mode) {\n        return;\n      }\n      draft.mode = newMode;\n      let tempDepartures = draft.departures;\n\n      if (newMode !== 'all') {\n        let date = new Date();\n        let formattedDate = date.toDateString();\n        tempDepartures = tempDepartures.filter(\n          schedule =>\n            Date.parse(`${formattedDate} ${schedule.departure}`) > date\n        );\n      }\n      draft.sortedDepartures = tempDepartures;\n\n      return;\n    }\n    case 'TOGGLE_TOOLTIP': {\n      draft.tooltip = false;\n      return;\n    }\n    default:\n      return;\n  }\n};\n","import React from 'react';\nimport { useImmerReducer } from 'use-immer';\nimport { stateReducer } from '../reducers/stateReducer';\n\nexport const StateContext = React.createContext();\n\nconst StateContextProvider = props => {\n  let initialState = {\n    departures: [],\n    sortedDepartures: [],\n    loading: false,\n    error: false,\n    mode: 'all',\n    tooltip: true\n  };\n\n  const [state, dispatch] = useImmerReducer(stateReducer, initialState);\n\n  return (\n    <StateContext.Provider value={{ state, dispatch }}>\n      {props.children}\n    </StateContext.Provider>\n  );\n};\n\nexport default StateContextProvider;\n","import React from 'react';\nimport { List, Cell } from '@vkontakte/vkui';\nimport './StopTable.css';\n\nconst StopTable = ({ stops }) => {\n  return (\n    <>\n      <List>\n        <Cell>\n          <div className='stop_table__item'>\n            <div className='stop_table__item__title stop_table__header'>\n              Остановка\n            </div>\n            <div className='stop_table__item__departure stop_table__header'>\n              Отправление\n            </div>\n          </div>\n        </Cell>\n        {stops.map((stop, index) => {\n          return (\n            <Cell key={index} multiline>\n              <div className='stop_table__item'>\n                <div className='stop_table__item__title'>\n                  {stop.station.title}\n                </div>\n                <div className='stop_table__item__departure'>\n                  {stop.departure\n                    ? stop.departure.slice(10, -3)\n                    : stop.arrival.slice(10, -3)}\n                </div>\n              </div>\n            </Cell>\n          );\n        })}\n      </List>\n    </>\n  );\n};\n\nexport default StopTable;\n","import React from 'react';\nconst { compose, withProps, lifecycle } = require('recompose');\nconst {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  DirectionsRenderer\n} = require('react-google-maps');\nconst MapWithADirectionsRenderer = compose(\n  withProps({\n    googleMapURL: `https://maps.googleapis.com/maps/api/js?key=AIzaSyBc3bsKQXVsZ-P-MRqPQyIiW1xwi_HEGZw&v=3.exp&libraries=geometry,drawing,places`,\n    loadingElement: <div style={{ height: `100%` }} />,\n    containerElement: <div style={{ height: `400px` }} />,\n    mapElement: <div style={{ height: `100%` }} />\n  }),\n  withScriptjs,\n  withGoogleMap,\n  lifecycle({\n    componentDidMount() {\n      const DirectionsService = new window.google.maps.DirectionsService();\n      const { stops } = this.props;\n      const waypoints = stops.map(stop => stop.station.title);\n      //  console.log(waypoints);\n      DirectionsService.route(\n        {\n          origin: waypoints[0],\n          waypoints: waypoints\n            .slice(1, waypoints.length - 1)\n            .map(location => ({ location, stopover: true })),\n          destination: waypoints[waypoints.length - 1],\n          travelMode: window.google.maps.TravelMode.DRIVING\n        },\n        (result, status) => {\n          if (status === window.google.maps.DirectionsStatus.OK) {\n            this.setState({\n              directions: result\n            });\n          } else {\n            console.error(`error fetching directions ${result}`);\n          }\n        }\n      );\n    }\n  })\n)(props => (\n  <div>\n    <GoogleMap\n      defaultZoom={8}\n      defaultCenter={new window.google.maps.LatLng(59.3628097, 28.5400579)}\n    >\n      {props.directions && <DirectionsRenderer directions={props.directions} />}\n    </GoogleMap>\n  </div>\n));\n\nexport default MapWithADirectionsRenderer;\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {\n  PanelHeader,\n  Footer,\n  Spinner,\n  Group,\n  Cell,\n  List\n} from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport StopTable from '../components/StopTable';\nimport MapWithADirectionsRenderer from '../components/Map';\nimport Icon24Info from '@vkontakte/icons/dist/24/info';\nimport Icon24Recent from '@vkontakte/icons/dist/24/recent';\n\nconst initialDetailsState = {\n  details: {},\n  loading: true\n};\nconst ScheduleDetail = ({ router, route }) => {\n  // console.log(route);\n  const [details, setDetails] = useState(initialDetailsState);\n  useEffect(() => {\n    axios\n      .get(\n        `https://cors-anywhere.herokuapp.com/https://api.rasp.yandex.net/v3.0/thread/?apikey=${process.env.REACT_APP_MM_KEY}&format=json&uid=${route.params.uid}&lang=ru_RU&show_systems=all\n      `\n      )\n      .then(res => {\n        setDetails(res.data);\n      })\n      .catch(err => console.log(err));\n  }, []);\n  // console.log(details);\n  return (\n    <>\n      <PanelHeader\n        left={<PanelHeaderBack onClick={() => router.navigate('departures')} />}\n      >\n        Детали\n      </PanelHeader>\n      {details.loading ? (\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            flexDirection: 'column'\n          }}\n        >\n          <Spinner size='small' style={{ marginTop: '20px' }} />\n        </div>\n      ) : (\n        <>\n          <Group title='Информация'>\n            <List>\n              <Cell multiline before={<Icon24Info />}>{`${\n                details.title\n              } ${details.number && `№${details.number}`}`}</Cell>\n              <Cell before={<Icon24Recent />}>{details.days}</Cell>\n            </List>\n          </Group>\n\n          <Group title='Маршрут следования'>\n            <StopTable stops={details.stops} />\n          </Group>\n          <Footer>\n            Часто автобусы опаздывают или приходят раньше. Обычно стоянка\n            транзитного автобуса — 2–5 минуты.\n          </Footer>\n          <Group title='Примерный маршрут'>\n            <MapWithADirectionsRenderer stops={details.stops} />\n          </Group>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default ScheduleDetail;\n","import React, { useContext } from 'react';\nimport { StateContext } from '../contexts/StateContext';\nimport persik from '../img/persik.png';\nimport { Group, Footer, List, Cell, Tooltip } from '@vkontakte/vkui';\n\nconst Departures = ({ router }) => {\n  const {\n    dispatch,\n    state: { sortedDepartures, mode, error, tooltip }\n  } = useContext(StateContext);\n\n  const renderCell = (departure, uid) => {\n    return (\n      <Cell\n        onClick={() =>\n          router.navigate('details', {\n            uid: uid\n          })\n        }\n        description={departure.isTransit ? 'транзитный' : null}\n        expandable\n        key={uid}\n      >\n        {departure.slice(0, -3)}\n      </Cell>\n    );\n  };\n\n  if ((mode === 'hide' && !sortedDepartures.length) || error) {\n    return (\n      <>\n        <img\n          className='Persik'\n          style={{\n            display: 'block',\n            width: '50%',\n            maxWidth: '240px',\n            margin: '20px auto'\n          }}\n          src={persik}\n          alt='Persik The Cat'\n        />\n        <Footer>\n          {error ? 'Ошибка сервера' : 'К сожалению, все рейсы уже ушли'}\n        </Footer>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {' '}\n      <Group title='Время и дни отправления'>\n        <List>\n          {sortedDepartures.map((departure, index) =>\n            index === 0 ? (\n              <Tooltip\n                key={index}\n                text='Для просмотра деталей нажмите на ячейку со временем'\n                isShown={tooltip}\n                onClose={() => dispatch({ type: 'TOGGLE_TOOLTIP' })}\n                offsetX={10}\n              >\n                {renderCell(departure.departure, departure.thread.uid)}\n              </Tooltip>\n            ) : (\n              renderCell(departure.departure, departure.thread.uid)\n            )\n          )}\n        </List>\n      </Group>\n      <Footer>Найдено рейсов: {sortedDepartures.length}</Footer>\n    </>\n  );\n};\n\nexport default Departures;\n","import React, { useContext, useState } from 'react';\nimport { StateContext } from '../contexts/StateContext';\nimport {\n  Cell,\n  PanelHeader,\n  HeaderContext,\n  PanelHeaderContent,\n  List\n} from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon24Hide from '@vkontakte/icons/dist/24/hide';\nimport Icon24View from '@vkontakte/icons/dist/24/view';\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\n\nconst DeparturesFilter = React.memo(({ router }) => {\n  const [context, setContext] = useState(false);\n  const {\n    dispatch,\n    state: { mode }\n  } = useContext(StateContext);\n  // console.log(mode);\n\n  const handleFilterSelect = e => {\n    const mode = e.currentTarget.dataset.mode;\n\n    dispatch({ type: 'SET_FILTER', payload: mode });\n    requestAnimationFrame(() => setContext(false));\n  };\n\n  return (\n    <>\n      <PanelHeader\n        left={<PanelHeaderBack onClick={() => router.navigate('home')} />}\n      >\n        <PanelHeaderContent\n          onClick={() => setContext(!context)}\n          aside={<Icon16Dropdown />}\n        >\n          Отправление\n        </PanelHeaderContent>\n      </PanelHeader>\n      <HeaderContext opened={context} onClose={() => setContext(false)}>\n        <List>\n          <Cell\n            before={<Icon24View fill='var(--accent)' />}\n            asideContent={\n              mode === 'all' ? <Icon24Done fill='var(--accent)' /> : null\n            }\n            onClick={handleFilterSelect}\n            data-mode='all'\n          >\n            Показать все\n          </Cell>\n          <Cell\n            before={<Icon24Hide fill='var(--accent)' />}\n            asideContent={\n              mode === 'hide' ? <Icon24Done fill='var(--accent)' /> : null\n            }\n            onClick={handleFilterSelect}\n            data-mode='hide'\n          >\n            Скрыть ушедшие\n          </Cell>\n        </List>\n      </HeaderContext>\n    </>\n  );\n});\n\nexport default DeparturesFilter;\n","import React from 'react';\nimport { Div, Button } from '@vkontakte/vkui';\nimport Icon24Link from '@vkontakte/icons/dist/24/link';\n\nconst Footer = () => {\n  return (\n    <Div\n      className='footer'\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        textAlign: 'center'\n      }}\n    >\n      <Button\n        level='3'\n        component='a'\n        target='_blank'\n        href='http://rasp.yandex.ru/'\n        before={<Icon24Link />}\n      >\n        Данные предоставлены сервисом Яндекс.Расписания\n      </Button>\n    </Div>\n  );\n};\n\nexport default Footer;\n","import React, { useState, useContext } from 'react';\nimport {\n  View,\n  Panel,\n  ScreenSpinner,\n  PanelHeader,\n  Div,\n  Root\n} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport axios from 'axios';\nimport logo from './logo.svg';\nimport { useRouteNode } from 'react-router5';\nimport SearchForm from './components/SearchForm';\nimport SelectCity from './components/SelectCity';\nimport { StateContext } from './contexts/StateContext';\nimport ScheduleDetail from './panels/ScheduleDetail';\nimport Departures from './panels/Departures';\nimport DeparturesFilter from './panels/DeparturesFilter';\nimport Footer from './components/Footer';\n\nconst App = () => {\n  let initialFromState = {\n    code: 'c10870',\n    city: 'Кингисепп'\n  };\n  let initialToState = {\n    code: 'c2',\n    city: 'Санкт-Петербург'\n  };\n\n  const { route, router } = useRouteNode('');\n  const {\n    state: { loading },\n    dispatch\n  } = useContext(StateContext);\n\n  const [from, setFrom] = useState(initialFromState);\n  const [to, setTo] = useState(initialToState);\n\n  const fetchData = async (from, to) => {\n    dispatch({ type: 'FETCH_DATA_REQUEST' });\n    try {\n      const result = await axios(`https://cors-anywhere.herokuapp.com/https://api.rasp.yandex.net/v3.0/search/?apikey=${process.env.REACT_APP_MM_KEY}&\nformat=json&from=${from}&to=${to}&lang=ru_RU&page=1&transport_types=bus`);\n      // console.log(result.data);\n      dispatch({\n        type: 'FETCH_DATA_SUCCESS',\n        payload: result.data\n      });\n      router.navigate('departures');\n    } catch (error) {\n      dispatch({ type: 'FETCH_DATA_ERROR' });\n    }\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    if (from.code === to.code) {\n      return;\n    }\n    fetchData(from.code, to.code);\n  };\n\n  const handleCitySelect = (state, city, code) => {\n    state === 'from' ? setFrom({ code, city }) : setTo({ code, city });\n    router.navigate('home');\n    // console.log(from);\n  };\n\n  const swapValues = () => {\n    setFrom(to);\n    setTo(from);\n  };\n\n  const activeView = route.name === 'select' ? 'selectView' : 'homeView';\n  const activePanel = route.name;\n\n  return (\n    <Root popout={loading ? <ScreenSpinner /> : null} activeView={activeView}>\n      <View activePanel={activePanel} id='homeView'>\n        <Panel id='home'>\n          <PanelHeader>Расписание 841</PanelHeader>\n          <Div style={{ textAlign: 'center', marginTop: 10 }}>\n            <img width={96} height={96} src={logo} alt='logo' />\n          </Div>\n          <SearchForm\n            onSubmit={onSubmit}\n            from={from}\n            to={to}\n            swapValues={swapValues}\n            router={router}\n          />\n          <Footer />\n        </Panel>\n\n        <Panel id='departures'>\n          <DeparturesFilter router={router} />\n          <Departures route={route} router={router} />\n        </Panel>\n        <Panel id='details'>\n          <ScheduleDetail route={route} router={router} />\n        </Panel>\n      </View>\n      <View activePanel={activePanel} id='selectView'>\n        <Panel id='select'>\n          <SelectCity\n            handleCitySelect={handleCitySelect}\n            route={route}\n            from={from.city}\n            to={to.city}\n          />\n        </Panel>\n      </View>\n    </Root>\n  );\n};\n\nexport default App;\n","export default [\n  { name: 'home', path: '/' },\n  { name: 'select', path: '/select' },\n  {\n    name: 'departures',\n    path: '/departures'\n  },\n  { name: 'details', path: '/departures/:uid' }\n];\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\nimport { RouterProvider } from 'react-router5';\nimport createRouter from './create-router';\nimport StateContextProvider from './contexts/StateContext';\n\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit', {});\n\nconst router = createRouter();\n\nrouter.start(() => {\n  ReactDOM.render(\n    <StateContextProvider>\n      <RouterProvider router={router}>\n        <App router={router} />\n      </RouterProvider>\n    </StateContextProvider>,\n    document.getElementById('root')\n  );\n});\n","import createRouter from 'router5';\nimport loggerPlugin from 'router5-plugin-logger';\nimport browserPlugin from 'router5-plugin-browser';\nimport routes from './routes.js';\n\nexport default function configureRouter() {\n  const router = createRouter(routes, {\n    defaultRoute: 'schedules'\n  });\n\n  router.usePlugin(loggerPlugin);\n  router.usePlugin(\n    browserPlugin({\n      useHash: true\n    })\n  );\n\n  return router;\n}\n"],"sourceRoot":""}